<div class="home-container">
    <div class="row justify-content-center" id="alertArea"></div>
    <div class="row justify-content-center">
        <svg width="340" height="80" viewBox="0 0 340 80" fill="none" xmlns="http://www.w3.org/2000/svg"
             xmlns:xlink="http://www.w3.org/1999/xlink">
            <rect width="340" height="80" fill="url(#pattern0)" />
            <defs>
                <pattern id="pattern0" patternContentUnits="objectBoundingBox" width="1" height="1">
                    <use xlink:href="#image0" transform="scale(0.00294118 0.0125)" />
                </pattern>
                <image id="image0" width="340" height="80"
                       xlink:href="data:image/png;base64,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" />
            </defs>
        </svg>
    </div>
    <div class="joke-box">
        <div class="d-flex">
            <div class="mr-auto"><h3 class="joke-header"></h3></div>
            <div class="p-2">
                <div class="navigation-btn modifyJoke" data-toggle="modal" data-target="#editModal">
                    <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M0.5 17.125V21.5H4.875L17.7783 8.59665L13.4033 4.22165L0.5 17.125ZM21.1617 5.21332C21.6167 4.75832 21.6167 4.02332 21.1617 3.56832L18.4317 0.83832C17.9767 0.38332 17.2417 0.38332 16.7867 0.83832L14.6517 2.97332L19.0267 7.34832L21.1617 5.21332Z" fill="#4F4F4F"/>
                    </svg>
                </div>
            </div>
            <div class="p-2">
                <div class="navigation-btn modifyJoke" data-toggle="modal" data-target="#deleteModal">
                    <svg width="18" height="22" viewBox="0 0 18 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M2.00001 19.1667C2.00001 20.45 3.05001 21.5 4.33334 21.5H13.6667C14.95 21.5 16 20.45 16 19.1667V5.16667H2.00001V19.1667ZM4.33334 7.5H13.6667V19.1667H4.33334V7.5ZM13.0833 1.66667L11.9167 0.5H6.08334L4.91668 1.66667H0.833344V4H17.1667V1.66667H13.0833Z" fill="#4F4F4F"/>
                    </svg>
                </div>
            </div>
            <div class="p-2">
                <div class="navigation-btn" data-toggle="modal" data-target="#newJokeModal">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M24 10h-10v-10h-4v10h-10v4h10v10h4v-10h10z"/></svg>
                </div>
            </div>
        </div>
        <div class="d-flex">
            <p class="joke-text"></p>
        </div>
    </div>
    <div class="row mt-4 justify-content-center">
        <div class="btn-box">
            <span class="navigation-btn" onclick="javascript:randomJoke()">
                <svg width="12" height="18" viewBox="0 0 12 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3.00001 18L0.88501 15.885L7.75501 9L0.885013 2.115L3.00001 3.69798e-07L12 9L3.00001 18Z"
                          fill="black" />
                </svg>
            </span>
            <label class="btn-text"> következő vicc</label>
        </div>
    </div>
</div>

<div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="deleteModalLabel">Vicc törlésének megerősítése</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>Biztos benne, hogy törölni szeretné a jelenlegi viccet?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Mégse</button>
                <button type="button" class="btn btn-danger" onclick="javascript:deleteCurrentJoke();">Törlés</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="editModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editModalLabel">Vicc szerkesztése</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row justify-content-center" id="editAlertArea"></div>
                <form>
                    <div class="form-group">
                        <label for="edit-title" class="col-form-label">Cím:</label>
                        <input type="text" class="form-control" id="edit-title">
                    </div>
                    <div class="form-group">
                        <label for="edit-content" class="col-form-label">Vicc:</label>
                        <textarea class="form-control" id="edit-content"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Bezár</button>
                <button type="button" class="btn btn-primary" onclick="javascript:editJokeEvent();">Mentés</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="newJokeModal" tabindex="-1" role="dialog" aria-labelledby="newJokeModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="newJokeModalLabel">Vicc feltöltése</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row justify-content-center" id="uploadAlertArea"></div>
                <form>
                    <div class="form-group">
                        <label for="edit-title" class="col-form-label">Cím:</label>
                        <input type="text" class="form-control" id="new-title">
                    </div>
                    <div class="form-group">
                        <label for="edit-content" class="col-form-label">Vicc:</label>
                        <textarea class="form-control" id="new-content"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Bezár</button>
                <button type="button" class="btn btn-primary" onclick="javascript:newJokeEvent();">Feltöltés</button>
            </div>
        </div>
    </div>
</div>


<script>
    $(document).ready(function() {
        randomJoke();

        $('#editModal').on('show.bs.modal', function () {
            var modal = $(this);
            modal.find('#edit-title').val(randomContent.title);
            modal.find('#edit-content').val(randomContent.content);
        });
    });
    function deleteCurrentJoke(){
        deleteJoke(randomContent.id)
            .then(() => {
                $('#alertArea').html('');
                randomJoke();
            }).catch(errorMsg => {
            $('#alertArea').prepend(`<div class="alert alert-danger col-10 mx-auto" role="alert">
                ${errorMsg ?? 'Hiba történt a feldolgozás során!'}
                <button type="button" class="close" data-dismiss="alert" aria-label="Bezár">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>`);
        }).finally(() => {
            $('#deleteModal').modal('hide');
        });
    }
    function editJokeEvent(){
        let title = $('#edit-title').val();
        let content = $('#edit-content').val();

        updateJoke(randomContent.id,title,content)
            .then((pid) => {
                $('#editAlertArea').html('');
                jokeById(pid);
                $('#editModal').modal('hide');
            }).catch(errorMsg => {
            $('#editAlertArea').prepend(`<div class="alert alert-danger col-10 mx-auto" role="alert">
                    ${errorMsg ?? 'Hiba történt a feldolgozás során!'}
                    <button type="button" class="close" data-dismiss="alert" aria-label="Bezár">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>`);
        });
    }
    function newJokeEvent(){
        let title = $('#new-title').val();
        let content = $('#new-content').val();

        uploadJoke(title,content)
            .then((pid) => {
                $('#uploadAlertArea').html('');
                jokeById(pid);
                $('#newJokeModal').modal('hide');
                $('#new-title').val('');
                $('#new-content').val('');
            }).catch(errorMsg => {
            $('#uploadAlertArea').prepend(`<div class="alert alert-danger col-10 mx-auto" role="alert">
                    ${errorMsg ?? 'Hiba történt a feldolgozás során!'}
                    <button type="button" class="close" data-dismiss="alert" aria-label="Bezár">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>`);
        });
    }

</script>